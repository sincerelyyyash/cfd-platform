
datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
  output   = "../generated/client"
}

enum OrderType {
  long
  short
}

enum StatusType {
  open
  closed
  pending
}

model Snapshot {
  id        String   @id @default(uuid())
  data      Json
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model User {
  id            String           @id
  email         String
  lastLoggedIn  DateTime
  existingTrade ExistingTrade[]  @relation("UserTrades")
}

model Asset {
  id            String           @id
  symbol        String
  imageURL      String
  name          String
  decimal       Int
  existingTrade ExistingTrade[]  @relation("AssetTrades")
}

model ExistingTrade {
  id         String     @id
  type       OrderType
  status     StatusType
  quantity   Int
  entryPrice Int
  exitPrice  Int
  pnL        Int
  leverage   Int?
  margin     Int?
  stopLoss   Int?
  takeProfit Int?
  liquidated Boolean?

  user   User  @relation("UserTrades", fields: [userId], references: [id])
  userId String

  asset   Asset @relation("AssetTrades", fields: [assetId], references: [id])
  assetId String
}

